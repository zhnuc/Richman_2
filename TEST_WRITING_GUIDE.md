# å¤§å¯Œç¿æ¸¸æˆæµ‹è¯•ç”¨ä¾‹æ’°å†™æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æŒ‡å—è¯¦ç»†è¯´æ˜å¦‚ä½•æ ¹æ®æ¸¸æˆè§„åˆ™æ’°å†™é«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹ï¼Œç¡®ä¿æµ‹è¯•è¦†ç›–å…¨é¢ã€å‡†ç¡®å¯é ã€‚

## ğŸ¯ æµ‹è¯•ç”¨ä¾‹æ’°å†™åŸåˆ™

### 1. å®Œæ•´æ€§åŸåˆ™
- æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹å¿…é¡»åŒ…å«å®Œæ•´çš„æ‰§è¡Œæµç¨‹
- ä»æ¸¸æˆå¯åŠ¨åˆ°æ¸¸æˆç»“æŸçš„å®Œæ•´è·¯å¾„
- åŒ…å«æ‰€æœ‰å¿…è¦çš„éªŒè¯ç‚¹

### 2. ç‹¬ç«‹æ€§åŸåˆ™
- æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç‹¬ç«‹å¯æ‰§è¡Œ
- ä¸ä¾èµ–å…¶ä»–æµ‹è¯•ç”¨ä¾‹çš„ç»“æœ
- æµ‹è¯•ç”¨ä¾‹ä¹‹é—´æ— ç›¸äº’å½±å“

### 3. å‡†ç¡®æ€§åŸåˆ™
- æœŸæœ›è¾“å‡ºå¿…é¡»ä¸å®é™…æ¸¸æˆè¡Œä¸ºä¸€è‡´
- æ•°å€¼è®¡ç®—å¿…é¡»å‡†ç¡®æ— è¯¯
- çŠ¶æ€å˜åŒ–å¿…é¡»æ­£ç¡®åæ˜ 

### 4. å¯ç»´æŠ¤æ€§åŸåˆ™
- æµ‹è¯•ç”¨ä¾‹å‘½åæ¸…æ™°æ˜“æ‡‚
- æµ‹è¯•æè¿°è¯¦ç»†å‡†ç¡®
- ä¾¿äºåç»­ä¿®æ”¹å’Œæ‰©å±•

## ğŸ“ æµ‹è¯•ç”¨ä¾‹æ–‡ä»¶ç»“æ„

### æ ‡å‡†ç›®å½•ç»“æ„
```
tests/integration/test_{åŠŸèƒ½}_{åºå·}/
â”œâ”€â”€ cmdlist.txt           # å‘½ä»¤åºåˆ—ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ expected_output.txt   # æœŸæœ›æ§åˆ¶å°è¾“å‡ºï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ expected_dump.json    # æœŸæœ›JSONçŠ¶æ€ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ preset.json          # åˆå§‹çŠ¶æ€ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ description.txt       # æµ‹è¯•æè¿°ï¼ˆæ¨èï¼‰
â””â”€â”€ tags.txt             # æµ‹è¯•æ ‡ç­¾ï¼ˆæ¨èï¼‰
```

### æ–‡ä»¶å†…å®¹è¦æ±‚

#### cmdlist.txt - å‘½ä»¤åºåˆ—
**æ ¼å¼è¦æ±‚**ï¼š
- ç¬¬ä¸€è¡Œï¼šè§’è‰²é€‰æ‹©ï¼ˆ1-4çš„æ•°å­—ç»„åˆï¼‰
- åç»­è¡Œï¼šæ¸¸æˆå‘½ä»¤
- æœ€åä¸€è¡Œï¼šquitï¼ˆé€€å‡ºå‘½ä»¤ï¼‰

**ç¤ºä¾‹**ï¼š
```
1
step 3
query
dump
quit
```

**æ³¨æ„äº‹é¡¹**ï¼š
- å‘½ä»¤å¿…é¡»å°å†™
- å‚æ•°ç”¨ç©ºæ ¼åˆ†éš”
- æ¯è¡Œä¸€ä¸ªå‘½ä»¤
- å¿…é¡»åŒ…å«quitå‘½ä»¤

#### expected_output.txt - æœŸæœ›è¾“å‡º
**æ ¼å¼è¦æ±‚**ï¼š
- åŒ…å«å®Œæ•´çš„æ§åˆ¶å°è¾“å‡º
- ä»æ¸¸æˆå¯åŠ¨åˆ°æ¸¸æˆç»“æŸ
- åŒ…å«æ‰€æœ‰æç¤ºä¿¡æ¯å’Œç»“æœ

**ç¤ºä¾‹**ï¼š
```
å¤§å¯Œç¿æ¸¸æˆå¯åŠ¨
æ¬¢è¿æ¥åˆ°å¤§å¯Œç¿ï¼Œè¯·æŒ‰æ•°å­—é”®é€‰æ‹©ä½ çš„è§’è‰²ï¼š
1.é’±å¤«äºº
2.é˜¿åœŸä¼¯
3.å­™å°ç¾
4.é‡‘è´è´
è¯·è¾“å…¥é€‰æ‹© (1-4): æ‚¨é€‰æ‹©äº†: é’±å¤«äºº
æ¸¸æˆå¼€å§‹ï¼
> === æ¸¸æˆçŠ¶æ€ ===
ç©å®¶æ•°é‡: 1
ç©å®¶0: é’±å¤«äºº, èµ„é‡‘:1500, ä½ç½®:0, å­˜æ´»:æ˜¯
å½“å‰ç©å®¶: 0
æ¸¸æˆçŠ¶æ€: æœªå¼€å§‹
> æ¸¸æˆçŠ¶æ€å·²ä¿å­˜åˆ°: dump.json
> æ¸¸æˆç»“æŸ
```

**æ³¨æ„äº‹é¡¹**ï¼š
- è¾“å‡ºå¿…é¡»ä¸å®é™…æ¸¸æˆå®Œå…¨ä¸€è‡´
- åŒ…å«æ‰€æœ‰æ¢è¡Œç¬¦å’Œç©ºæ ¼
- æç¤ºä¿¡æ¯å¿…é¡»å‡†ç¡®
- çŠ¶æ€ä¿¡æ¯å¿…é¡»æ­£ç¡®

#### expected_dump.json - æœŸæœ›çŠ¶æ€
**æ ¼å¼è¦æ±‚**ï¼š
- ç¬¦åˆJSONæ ¼å¼è§„èŒƒ
- åŒ…å«å®Œæ•´çš„æ¸¸æˆçŠ¶æ€
- æ•°å€¼å¿…é¡»å‡†ç¡®

**ç¤ºä¾‹**ï¼š
```json
{
    "players": [
        {
            "index": 0,
            "name": "é’±å¤«äºº",
            "fund": 1500,
            "credit": 0,
            "location": 0,
            "alive": true,
            "prop": {
                "bomb": 0,
                "barrier": 0,
                "robot": 0,
                "total": 0
            },
            "buff": {
                "god": 0,
                "prison": 0,
                "hospital": 0
            }
        }
    ],
    "houses": {
    },
    "placed_prop": {
        "bomb": [],
        "barrier": []
    },
    "game": {
        "now_player": 0,
        "next_player": 1,
        "started": false,
        "ended": false,
        "winner": -1
    }
}
```

**æ³¨æ„äº‹é¡¹**ï¼š
- JSONæ ¼å¼å¿…é¡»æ­£ç¡®
- æ•°å€¼å¿…é¡»å‡†ç¡®
- çŠ¶æ€å¿…é¡»å®Œæ•´
- å­—æ®µå¿…é¡»é½å…¨

## ğŸ® å…·ä½“åŠŸèƒ½æµ‹è¯•ç”¨ä¾‹æ’°å†™

### 1. æ¸¸æˆå¯åŠ¨å’Œè§’è‰²é€‰æ‹©æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼štest_startup_001
**åŠŸèƒ½**ï¼šå•è§’è‰²é€‰æ‹©æµ‹è¯•
**ç›®æ ‡**ï¼šéªŒè¯å•ä¸ªè§’è‰²é€‰æ‹©åŠŸèƒ½

**cmdlist.txt**ï¼š
```
1
quit
```

**expected_output.txt**ï¼š
```
å¤§å¯Œç¿æ¸¸æˆå¯åŠ¨
æ¬¢è¿æ¥åˆ°å¤§å¯Œç¿ï¼Œè¯·æŒ‰æ•°å­—é”®é€‰æ‹©ä½ çš„è§’è‰²ï¼š
1.é’±å¤«äºº
2.é˜¿åœŸä¼¯
3.å­™å°ç¾
4.é‡‘è´è´
è¯·è¾“å…¥é€‰æ‹© (1-4): æ‚¨é€‰æ‹©äº†: é’±å¤«äºº
æ¸¸æˆå¼€å§‹ï¼
> æ¸¸æˆç»“æŸ
```

**expected_dump.json**ï¼š
```json
{
    "players": [
        {
            "index": 0,
            "name": "é’±å¤«äºº",
            "fund": 1500,
            "credit": 0,
            "location": 0,
            "alive": true,
            "prop": {
                "bomb": 0,
                "barrier": 0,
                "robot": 0,
                "total": 0
            },
            "buff": {
                "god": 0,
                "prison": 0,
                "hospital": 0
            }
        }
    ],
    "houses": {
    },
    "placed_prop": {
        "bomb": [],
        "barrier": []
    },
    "game": {
        "now_player": 0,
        "next_player": 1,
        "started": false,
        "ended": false,
        "winner": -1
    }
}
```

### 2. ç§»åŠ¨åŠŸèƒ½æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼štest_move_001
**åŠŸèƒ½**ï¼šStepå‘½ä»¤åŸºç¡€æµ‹è¯•
**ç›®æ ‡**ï¼šéªŒè¯Stepå‘½ä»¤çš„ç§»åŠ¨åŠŸèƒ½

**cmdlist.txt**ï¼š
```
1
step 3
query
dump
quit
```

**expected_output.txt**ï¼š
```
å¤§å¯Œç¿æ¸¸æˆå¯åŠ¨
æ¬¢è¿æ¥åˆ°å¤§å¯Œç¿ï¼Œè¯·æŒ‰æ•°å­—é”®é€‰æ‹©ä½ çš„è§’è‰²ï¼š
1.é’±å¤«äºº
2.é˜¿åœŸä¼¯
3.å­™å°ç¾
4.é‡‘è´è´
è¯·è¾“å…¥é€‰æ‹© (1-4): æ‚¨é€‰æ‹©äº†: é’±å¤«äºº
æ¸¸æˆå¼€å§‹ï¼
> é’±å¤«äººç§»åŠ¨äº†3æ­¥ï¼Œå½“å‰ä½ç½®ï¼š3
> === æ¸¸æˆçŠ¶æ€ ===
ç©å®¶æ•°é‡: 1
ç©å®¶0: é’±å¤«äºº, èµ„é‡‘:1500, ä½ç½®:3, å­˜æ´»:æ˜¯
å½“å‰ç©å®¶: 0
æ¸¸æˆçŠ¶æ€: æœªå¼€å§‹
> æ¸¸æˆçŠ¶æ€å·²ä¿å­˜åˆ°: dump.json
> æ¸¸æˆç»“æŸ
```

**expected_dump.json**ï¼š
```json
{
    "players": [
        {
            "index": 0,
            "name": "é’±å¤«äºº",
            "fund": 1500,
            "credit": 0,
            "location": 3,
            "alive": true,
            "prop": {
                "bomb": 0,
                "barrier": 0,
                "robot": 0,
                "total": 0
            },
            "buff": {
                "god": 0,
                "prison": 0,
                "hospital": 0
            }
        }
    ],
    "houses": {
    },
    "placed_prop": {
        "bomb": [],
        "barrier": []
    },
    "game": {
        "now_player": 0,
        "next_player": 1,
        "started": false,
        "ended": false,
        "winner": -1
    }
}
```

### 3. æˆ¿äº§è´­ä¹°æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼štest_land_001
**åŠŸèƒ½**ï¼šåœ°æ®µ1ç©ºåœ°è´­ä¹°æµ‹è¯•
**ç›®æ ‡**ï¼šéªŒè¯åœ°æ®µ1ç©ºåœ°çš„è´­ä¹°åŠŸèƒ½

**cmdlist.txt**ï¼š
```
1
step 1
buy
query
dump
quit
```

**expected_output.txt**ï¼š
```
å¤§å¯Œç¿æ¸¸æˆå¯åŠ¨
æ¬¢è¿æ¥åˆ°å¤§å¯Œç¿ï¼Œè¯·æŒ‰æ•°å­—é”®é€‰æ‹©ä½ çš„è§’è‰²ï¼š
1.é’±å¤«äºº
2.é˜¿åœŸä¼¯
3.å­™å°ç¾
4.é‡‘è´è´
è¯·è¾“å…¥é€‰æ‹© (1-4): æ‚¨é€‰æ‹©äº†: é’±å¤«äºº
æ¸¸æˆå¼€å§‹ï¼
> é’±å¤«äººç§»åŠ¨äº†1æ­¥ï¼Œå½“å‰ä½ç½®ï¼š1
> å½“å‰ä½ç½®æ˜¯ç©ºåœ°ï¼Œæ˜¯å¦è´­ä¹°ï¼Ÿ(y/n): è´­ä¹°æˆåŠŸï¼èŠ±è´¹200å…ƒ
> === æ¸¸æˆçŠ¶æ€ ===
ç©å®¶æ•°é‡: 1
ç©å®¶0: é’±å¤«äºº, èµ„é‡‘:1300, ä½ç½®:1, å­˜æ´»:æ˜¯
å½“å‰ç©å®¶: 0
æ¸¸æˆçŠ¶æ€: æœªå¼€å§‹
> æ¸¸æˆçŠ¶æ€å·²ä¿å­˜åˆ°: dump.json
> æ¸¸æˆç»“æŸ
```

**expected_dump.json**ï¼š
```json
{
    "players": [
        {
            "index": 0,
            "name": "é’±å¤«äºº",
            "fund": 1300,
            "credit": 0,
            "location": 1,
            "alive": true,
            "prop": {
                "bomb": 0,
                "barrier": 0,
                "robot": 0,
                "total": 0
            },
            "buff": {
                "god": 0,
                "prison": 0,
                "hospital": 0
            }
        }
    ],
    "houses": {
        "1": {
            "owner": "é’±å¤«äºº",
            "level": 0
        }
    },
    "placed_prop": {
        "bomb": [],
        "barrier": []
    },
    "game": {
        "now_player": 0,
        "next_player": 1,
        "started": false,
        "ended": false,
        "winner": -1
    }
}
```

### 4. é“å…·ä½¿ç”¨æµ‹è¯•

#### æµ‹è¯•ç”¨ä¾‹ï¼štest_prop_001
**åŠŸèƒ½**ï¼šè·¯éšœä½¿ç”¨æµ‹è¯•
**ç›®æ ‡**ï¼šéªŒè¯è·¯éšœçš„æ”¾ç½®å’Œä½¿ç”¨åŠŸèƒ½

**cmdlist.txt**ï¼š
```
1
step 25
buy 1
step 1
block 5
query
dump
quit
```

**expected_output.txt**ï¼š
```
å¤§å¯Œç¿æ¸¸æˆå¯åŠ¨
æ¬¢è¿æ¥åˆ°å¤§å¯Œç¿ï¼Œè¯·æŒ‰æ•°å­—é”®é€‰æ‹©ä½ çš„è§’è‰²ï¼š
1.é’±å¤«äºº
2.é˜¿åœŸä¼¯
3.å­™å°ç¾
4.é‡‘è´è´
è¯·è¾“å…¥é€‰æ‹© (1-4): æ‚¨é€‰æ‹©äº†: é’±å¤«äºº
æ¸¸æˆå¼€å§‹ï¼
> é’±å¤«äººç§»åŠ¨äº†1æ­¥ï¼Œå½“å‰ä½ç½®ï¼š26
> æ¬¢è¿å…‰ä¸´é“å…·å±‹ï¼Œè¯·é€‰æ‹©æ‚¨æ‰€éœ€è¦çš„é“å…·:
> 1.è·¯éšœ(50ç‚¹) 2.æœºå™¨å¨ƒå¨ƒ(30ç‚¹) 3.ç‚¸å¼¹(50ç‚¹)
> è´­ä¹°æˆåŠŸï¼èŠ±è´¹50ç‚¹
> é’±å¤«äººç§»åŠ¨äº†1æ­¥ï¼Œå½“å‰ä½ç½®ï¼š27
> è·¯éšœæ”¾ç½®æˆåŠŸï¼ä½ç½®ï¼š32
> === æ¸¸æˆçŠ¶æ€ ===
ç©å®¶æ•°é‡: 1
ç©å®¶0: é’±å¤«äºº, èµ„é‡‘:1500, ä½ç½®:27, å­˜æ´»:æ˜¯
å½“å‰ç©å®¶: 0
æ¸¸æˆçŠ¶æ€: æœªå¼€å§‹
> æ¸¸æˆçŠ¶æ€å·²ä¿å­˜åˆ°: dump.json
> æ¸¸æˆç»“æŸ
```

**expected_dump.json**ï¼š
```json
{
    "players": [
        {
            "index": 0,
            "name": "é’±å¤«äºº",
            "fund": 1500,
            "credit": 0,
            "location": 27,
            "alive": true,
            "prop": {
                "bomb": 0,
                "barrier": 0,
                "robot": 0,
                "total": 1
            },
            "buff": {
                "god": 0,
                "prison": 0,
                "hospital": 0
            }
        }
    ],
    "houses": {
    },
    "placed_prop": {
        "bomb": [],
        "barrier": [32]
    },
    "game": {
        "now_player": 0,
        "next_player": 1,
        "started": false,
        "ended": false,
        "winner": -1
    }
}
```

## ğŸ”§ æµ‹è¯•ç”¨ä¾‹æ’°å†™å·¥å…·

### 1. æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨

```python
#!/usr/bin/env python3
"""
æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨
æ ¹æ®æ¨¡æ¿è‡ªåŠ¨ç”Ÿæˆæµ‹è¯•ç”¨ä¾‹
"""

import os
import json
from pathlib import Path

class TestCaseGenerator:
    def __init__(self, base_dir="tests/integration"):
        self.base_dir = Path(base_dir)
        self.test_counter = 1
    
    def generate_move_test(self, steps):
        """ç”Ÿæˆç§»åŠ¨æµ‹è¯•ç”¨ä¾‹"""
        test_name = f"test_move_{self.test_counter:03d}"
        test_dir = self.base_dir / test_name
        test_dir.mkdir(exist_ok=True)
        
        # ç”Ÿæˆcmdlist.txt
        cmdlist_content = f"""1
step {steps}
query
dump
quit"""
        
        with open(test_dir / "cmdlist.txt", "w", encoding="utf-8") as f:
            f.write(cmdlist_content)
        
        # ç”Ÿæˆexpected_output.txt
        expected_output = f"""å¤§å¯Œç¿æ¸¸æˆå¯åŠ¨
æ¬¢è¿æ¥åˆ°å¤§å¯Œç¿ï¼Œè¯·æŒ‰æ•°å­—é”®é€‰æ‹©ä½ çš„è§’è‰²ï¼š
1.é’±å¤«äºº
2.é˜¿åœŸä¼¯
3.å­™å°ç¾
4.é‡‘è´è´
è¯·è¾“å…¥é€‰æ‹© (1-4): æ‚¨é€‰æ‹©äº†: é’±å¤«äºº
æ¸¸æˆå¼€å§‹ï¼
> é’±å¤«äººç§»åŠ¨äº†{steps}æ­¥ï¼Œå½“å‰ä½ç½®ï¼š{steps}
> === æ¸¸æˆçŠ¶æ€ ===
ç©å®¶æ•°é‡: 1
ç©å®¶0: é’±å¤«äºº, èµ„é‡‘:1500, ä½ç½®:{steps}, å­˜æ´»:æ˜¯
å½“å‰ç©å®¶: 0
æ¸¸æˆçŠ¶æ€: æœªå¼€å§‹
> æ¸¸æˆçŠ¶æ€å·²ä¿å­˜åˆ°: dump.json
> æ¸¸æˆç»“æŸ"""
        
        with open(test_dir / "expected_output.txt", "w", encoding="utf-8") as f:
            f.write(expected_output)
        
        # ç”Ÿæˆexpected_dump.json
        expected_dump = {
            "players": [
                {
                    "index": 0,
                    "name": "é’±å¤«äºº",
                    "fund": 1500,
                    "credit": 0,
                    "location": steps,
                    "alive": True,
                    "prop": {
                        "bomb": 0,
                        "barrier": 0,
                        "robot": 0,
                        "total": 0
                    },
                    "buff": {
                        "god": 0,
                        "prison": 0,
                        "hospital": 0
                    }
                }
            ],
            "houses": {},
            "placed_prop": {
                "bomb": [],
                "barrier": []
            },
            "game": {
                "now_player": 0,
                "next_player": 1,
                "started": False,
                "ended": False,
                "winner": -1
            }
        }
        
        with open(test_dir / "expected_dump.json", "w", encoding="utf-8") as f:
            json.dump(expected_dump, f, indent=4, ensure_ascii=False)
        
        self.test_counter += 1
        return test_name

# ä½¿ç”¨ç¤ºä¾‹
generator = TestCaseGenerator()
for steps in range(1, 7):
    generator.generate_move_test(steps)
```

### 2. æµ‹è¯•ç”¨ä¾‹éªŒè¯å™¨

```python
#!/usr/bin/env python3
"""
æµ‹è¯•ç”¨ä¾‹éªŒè¯å™¨
éªŒè¯æµ‹è¯•ç”¨ä¾‹çš„æ­£ç¡®æ€§
"""

import subprocess
import json
import difflib
from pathlib import Path

class TestValidator:
    def __init__(self, game_binary="./richman"):
        self.game_binary = game_binary
    
    def validate_test_case(self, test_dir):
        """éªŒè¯å•ä¸ªæµ‹è¯•ç”¨ä¾‹"""
        test_dir = Path(test_dir)
        
        # æ£€æŸ¥å¿…éœ€æ–‡ä»¶
        required_files = ["cmdlist.txt", "expected_output.txt", "expected_dump.json"]
        for file in required_files:
            if not (test_dir / file).exists():
                print(f"âŒ ç¼ºå°‘æ–‡ä»¶: {file}")
                return False
        
        # è¿è¡Œæ¸¸æˆç¨‹åº
        cmdlist_file = test_dir / "cmdlist.txt"
        with open(cmdlist_file, 'r', encoding='utf-8') as f:
            cmd_input = f.read()
        
        try:
            result = subprocess.run(
                [self.game_binary],
                input=cmd_input,
                text=True,
                capture_output=True,
                timeout=30
            )
            
            # ä¿å­˜å®é™…è¾“å‡º
            with open(test_dir / "output.txt", "w", encoding="utf-8") as f:
                f.write(result.stdout)
            
            # æ¯”è¾ƒè¾“å‡º
            expected_output_file = test_dir / "expected_output.txt"
            with open(expected_output_file, 'r', encoding='utf-8') as f:
                expected_output = f.read()
            
            if result.stdout.strip() == expected_output.strip():
                print(f"âœ… è¾“å‡ºåŒ¹é…: {test_dir.name}")
                return True
            else:
                print(f"âŒ è¾“å‡ºä¸åŒ¹é…: {test_dir.name}")
                # æ˜¾ç¤ºå·®å¼‚
                diff = difflib.unified_diff(
                    expected_output.splitlines(keepends=True),
                    result.stdout.splitlines(keepends=True),
                    fromfile="æœŸæœ›è¾“å‡º",
                    tofile="å®é™…è¾“å‡º"
                )
                for line in diff:
                    print(line, end="")
                return False
                
        except subprocess.TimeoutExpired:
            print(f"âŒ è¶…æ—¶: {test_dir.name}")
            return False
        except Exception as e:
            print(f"âŒ é”™è¯¯: {test_dir.name} - {e}")
            return False
    
    def validate_all_tests(self, test_dir="tests/integration"):
        """éªŒè¯æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹"""
        test_dir = Path(test_dir)
        passed = 0
        total = 0
        
        for test_case in test_dir.iterdir():
            if test_case.is_dir():
                total += 1
                if self.validate_test_case(test_case):
                    passed += 1
        
        print(f"\nğŸ“Š éªŒè¯ç»“æœ: {passed}/{total} é€šè¿‡")
        return passed == total

# ä½¿ç”¨ç¤ºä¾‹
validator = TestValidator()
validator.validate_all_tests()
```

## ğŸ“‹ æµ‹è¯•ç”¨ä¾‹æ’°å†™æ£€æŸ¥æ¸…å•

### æ’°å†™å‰æ£€æŸ¥
- [ ] ç¡®å®šæµ‹è¯•ç›®æ ‡å’ŒåŠŸèƒ½ç‚¹
- [ ] åˆ†ææ¸¸æˆè§„åˆ™å’Œé¢„æœŸè¡Œä¸º
- [ ] è®¾è®¡æµ‹è¯•åœºæ™¯å’Œå‘½ä»¤åºåˆ—
- [ ] å‡†å¤‡æœŸæœ›è¾“å‡ºå’ŒçŠ¶æ€

### æ’°å†™ä¸­æ£€æŸ¥
- [ ] cmdlist.txtæ ¼å¼æ­£ç¡®
- [ ] å‘½ä»¤åºåˆ—å®Œæ•´å¯æ‰§è¡Œ
- [ ] æœŸæœ›è¾“å‡ºå‡†ç¡®å®Œæ•´
- [ ] JSONçŠ¶æ€æ­£ç¡®æ— è¯¯
- [ ] æµ‹è¯•ç”¨ä¾‹ç‹¬ç«‹å¯è¿è¡Œ

### æ’°å†™åæ£€æŸ¥
- [ ] è¿è¡Œæµ‹è¯•ç”¨ä¾‹éªŒè¯
- [ ] æ£€æŸ¥è¾“å‡ºæ˜¯å¦åŒ¹é…
- [ ] éªŒè¯JSONçŠ¶æ€æ­£ç¡®
- [ ] ç¡®è®¤æµ‹è¯•ç”¨ä¾‹é€šè¿‡
- [ ] æ›´æ–°æµ‹è¯•æ–‡æ¡£

## ğŸš€ æœ€ä½³å®è·µ

### 1. æµ‹è¯•ç”¨ä¾‹è®¾è®¡
- ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹åªæµ‹è¯•ä¸€ä¸ªåŠŸèƒ½ç‚¹
- æµ‹è¯•ç”¨ä¾‹è¦ç®€å•æ˜äº†
- é¿å…å¤æ‚çš„æµ‹è¯•åœºæ™¯
- ä¼˜å…ˆæµ‹è¯•æ ¸å¿ƒåŠŸèƒ½

### 2. å‘½ä»¤åºåˆ—è®¾è®¡
- å‘½ä»¤åºåˆ—è¦ç®€æ´æœ‰æ•ˆ
- é¿å…ä¸å¿…è¦çš„å‘½ä»¤
- ç¡®ä¿å‘½ä»¤é¡ºåºæ­£ç¡®
- åŒ…å«å¿…è¦çš„éªŒè¯å‘½ä»¤

### 3. æœŸæœ›è¾“å‡ºè®¾è®¡
- æœŸæœ›è¾“å‡ºè¦å®Œæ•´å‡†ç¡®
- åŒ…å«æ‰€æœ‰å¿…è¦çš„æç¤ºä¿¡æ¯
- çŠ¶æ€ä¿¡æ¯è¦æ­£ç¡®
- æ ¼å¼è¦ä¸å®é™…è¾“å‡ºä¸€è‡´

### 4. JSONçŠ¶æ€è®¾è®¡
- JSONæ ¼å¼è¦æ­£ç¡®
- æ•°å€¼è¦å‡†ç¡®
- çŠ¶æ€è¦å®Œæ•´
- å­—æ®µè¦é½å…¨

### 5. æµ‹è¯•ç”¨ä¾‹ç»´æŠ¤
- å®šæœŸæ›´æ–°æµ‹è¯•ç”¨ä¾‹
- åŠæ—¶ä¿®å¤å‘ç°çš„é—®é¢˜
- ä¿æŒæµ‹è¯•ç”¨ä¾‹çš„æ—¶æ•ˆæ€§
- ä¼˜åŒ–æµ‹è¯•ç”¨ä¾‹çš„æ€§èƒ½

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¸¸è§é—®é¢˜
1. **æµ‹è¯•ç”¨ä¾‹ä¸é€šè¿‡æ€ä¹ˆåŠï¼Ÿ**
   - æ£€æŸ¥æœŸæœ›è¾“å‡ºæ˜¯å¦å‡†ç¡®
   - éªŒè¯JSONçŠ¶æ€æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤å‘½ä»¤åºåˆ—æ˜¯å¦å®Œæ•´

2. **å¦‚ä½•ç”ŸæˆæœŸæœ›è¾“å‡ºï¼Ÿ**
   - è¿è¡Œæ¸¸æˆç¨‹åº
   - æ‰‹åŠ¨æ‰§è¡Œå‘½ä»¤åºåˆ—
   - è®°å½•å®é™…è¾“å‡º
   - ä¿å­˜æ¸¸æˆçŠ¶æ€

3. **å¦‚ä½•éªŒè¯JSONçŠ¶æ€ï¼Ÿ**
   - ä½¿ç”¨dumpå‘½ä»¤ä¿å­˜çŠ¶æ€
   - æ£€æŸ¥JSONæ ¼å¼æ˜¯å¦æ­£ç¡®
   - éªŒè¯æ•°å€¼æ˜¯å¦å‡†ç¡®
   - ç¡®è®¤çŠ¶æ€æ˜¯å¦å®Œæ•´

### è·å–å¸®åŠ©
- æŸ¥çœ‹ç°æœ‰æµ‹è¯•ç”¨ä¾‹ä½œä¸ºå‚è€ƒ
- ä½¿ç”¨æµ‹è¯•ç”¨ä¾‹ç”Ÿæˆå™¨
- è¿è¡Œæµ‹è¯•ç”¨ä¾‹éªŒè¯å™¨
- åœ¨å›¢é˜Ÿç¾¤ä¸­è®¨è®ºé—®é¢˜

---

**è®°ä½**ï¼šé«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹æ˜¯æ¸¸æˆè´¨é‡çš„é‡è¦ä¿éšœï¼Œè¯·è®¤çœŸå¯¹å¾…æ¯ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹çš„æ’°å†™ï¼